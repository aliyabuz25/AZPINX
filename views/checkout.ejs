<%- include('partials/header') %>
<% const localPaymentText = (settings && settings.footer_payment_text) ? settings.footer_payment_text : 'M10 / MilliÖN / eManat'; %>
<% const localWhatsappRaw = (settings && settings.footer_whatsapp_value) ? settings.footer_whatsapp_value : ''; %>
<% const localWhatsappDigits = String(localWhatsappRaw || '').replace(/[^\d]/g, ''); %>
<% const localWhatsappHref = localWhatsappDigits ? `https://wa.me/${localWhatsappDigits}` : ''; %>
 <div class="product-page-container">
 <div class="checkout-grid">
 <div class="checkout-left">
 <h3>Sifariş Məlumatları</h3>
 <div id="checkoutItems" class="p-price-card" style="margin-top: 20px;">
 <!-- Items list -->
 </div>

 <div class="form-group" style="margin: 16px 0;">
 <label for="paymentCountrySelect">Ödəniş ölkəsi</label>
 <select id="paymentCountrySelect" class="form-control" style="max-width: 280px;">
 <option value="AZ" selected>Azərbaycan (C2C)</option>
 <option value="TR">Türkiye (IBAN)</option>
 </select>
 </div>

 <div class="az-convert-strip">
 <div class="az-convert-item">
 <i class="ri-map-pin-2-line"></i>
 <span>Azərbaycan bazarı üçün optimallaşdırılmış checkout</span>
 </div>
 <div class="az-convert-item">
 <i class="ri-bank-card-line"></i>
 <span>Ödəniş üsulları: <strong><%= localPaymentText %></strong></span>
 </div>
 <div class="az-convert-item">
 <i class="ri-timer-flash-line"></i>
 <span>Tipik çatdırılma: 5-15 dəqiqə</span>
 </div>
 </div>

 <div class="az-convert-actions">
 <a href="/azerbaycanda-alisveris" class="btn btn-outline btn-sm">
 <i class="ri-compass-3-line"></i> Alış-veriş Planı
 </a>
 <% if (localWhatsappHref) { %>
 <a href="<%= localWhatsappHref %>" target="_blank" rel="noopener" class="btn btn-outline btn-sm">
 <i class="ri-whatsapp-line"></i> WhatsApp Dəstək
 </a>
 <% } %>
 </div>

 <div class="payment-selection-tabs" style="display: flex; gap: 10px; margin-bottom: 20px;">
 <div class="pay-tab active" onclick="switchPayment('c2c')" id="tab-c2c">
 <i class="ri-bank-card-line"></i>
 <span id="tab-c2c-label">Kart Köçürməsi</span>
 </div>
 <div class="pay-tab" onclick="switchPayment('balance')" id="tab-balance">
 <i class="ri-wallet-3-line"></i>
 <span>Balansla Ödə</span>
 </div>
 <div class="pay-tab" onclick="switchPayment('topup')" id="tab-topup">
 <i class="ri-wallet-2-line"></i>
 <span id="tab-topup-label">Balans Artır (C2C)</span>
 </div>
 </div>

 <!-- C2C Section -->
 <div id="section-c2c" class="p-price-card payment-section">
 <h4 id="transferTitle">C2C Kart Köçürməsi (Manual)</h4>
 <p id="transferInfo" style="margin: 10px 0; font-size: 14px; color: var(--text-muted);">Ödənişi aşağıdakı karta etdikdən sonra "Ödəniş etdim" düyməsinə basın.</p>
 <div class="bank-card-preview account-block account-az">
 <p class="card-label">KART NÖMRƏSİ</p>
 <p class="card-num">
 <%= settings.bank_card || '0000 0000 0000 0000' %>
 </p>
 <button type="button" class="copy-inline-btn" data-copy="<%= settings.bank_card || '0000 0000 0000 0000' %>" onclick="copyTextFromAttr(this)">
 Kopyala
 </button>
 <div class="card-footer-info">
 <span>
 <%= settings.bank_holder || 'ADMIN' %>
 </span>
 <span>
 <%= settings.bank_name || 'BANK' %>
 </span>
 </div>
 </div>
 <div class="iban-info-box account-block account-tr" style="display: none;">
 <h5 class="iban-title">IBAN Məlumatları</h5>
 <p class="iban-line"><strong>IBAN:</strong> <span class="iban-value"><%= settings.tr_iban || 'TR00 0000 0000 0000 0000 0000 00' %></span></p>
 <p class="iban-line"><strong>Ad Soyad:</strong> <%= settings.tr_account_holder || 'ISIM SOYISIM' %></p>
 <p class="iban-line"><strong>Banka:</strong> <%= settings.tr_bank_name || 'BANKA' %></p>
 <button type="button" class="copy-inline-btn" data-copy="<%= settings.tr_iban || 'TR00 0000 0000 0000 0000 0000 00' %>" onclick="copyTextFromAttr(this)">
 IBAN Kopyala
 </button>
 </div>

 <div class="form-group" style="margin-top: 15px;">
 <label>Ödəniş edən şəxs (Ad Soyad)</label>
 <input type="text" id="senderName" maxlength="80" autocomplete="name" placeholder="Hesap sahibi adı..."
 style="width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 4px;">
 </div>

 <div class="form-group" style="margin-top: 15px;">
 <label>Ödəniş qəbzi (Dekont - Şəkil)</label>
 <input type="file" id="receipt" accept="image/*"
 style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 4px;">
 </div>

 <button id="c2cPayBtn" class="btn btn-primary" onclick="confirmPayment('c2c')"
 style="width: 100%; padding: 15px; margin-top: 20px;">
 Ödəniş etdim
 </button>
 </div>

 <!-- Balance Section -->
 <div id="section-balance" class="p-price-card payment-section" style="display: none;">
 <h4>Balansla Ödəniş</h4>
 <p style="margin: 10px 0; font-size: 14px; color: var(--text-muted);">Məbləğ birbaşa balansınızdan
 çıxılacaq.</p>

 <div class="balance-status-card">
 <div class="balance-item">
 <small>Mövcud Balans</small>
 <span id="userBalanceDisplay">
 <%= Number(user.balance || 0).toFixed(2) %> AZN
 </span>
 </div>
 <div class="balance-item">
 <small>Sifariş Məbləği</small>
 <span id="orderTotalDisplay">0.00 AZN</span>
 </div>
 </div>

 <div id="balanceError" class="alert alert-danger"
 style="display:none; margin-top: 15px; font-size: 13px;">
 Kifayət qədər balansınız yoxdur.
 </div>

 <button id="balancePayBtn" class="btn btn-primary" onclick="confirmPayment('balance')"
 style="width: 100%; padding: 15px; margin-top: 20px;">
 Balansla Təsdiqlə
 </button>
 </div>

 <div id="section-topup" class="p-price-card payment-section" style="display: none;">
 <h4 id="topupTitle">Balans Artırma (C2C)</h4>
 <p id="topupInfo" style="margin: 10px 0; font-size: 14px; color: var(--text-muted);">Kart köçürməsini etdikdən sonra məbləği daxil edin, ad-soyad və dekont yükləyin. Sorğu admin təsdiqinə düşəcək.</p>
 <div class="bank-card-preview account-block account-az">
 <p class="card-label">KART NÖMRƏSİ</p>
 <p class="card-num"><%= settings.bank_card || '0000 0000 0000 0000' %></p>
 <button type="button" class="copy-inline-btn" data-copy="<%= settings.bank_card || '0000 0000 0000 0000' %>" onclick="copyTextFromAttr(this)">
 Kopyala
 </button>
 <div class="card-footer-info">
 <span><%= settings.bank_holder || 'ADMIN' %></span>
 <span><%= settings.bank_name || 'BANK' %></span>
 </div>
 </div>
 <div class="iban-info-box account-block account-tr" style="display: none;">
 <h5 class="iban-title">IBAN Məlumatları</h5>
 <p class="iban-line"><strong>IBAN:</strong> <span class="iban-value"><%= settings.tr_iban || 'TR00 0000 0000 0000 0000 0000 00' %></span></p>
 <p class="iban-line"><strong>Ad Soyad:</strong> <%= settings.tr_account_holder || 'ISIM SOYISIM' %></p>
 <p class="iban-line"><strong>Banka:</strong> <%= settings.tr_bank_name || 'BANKA' %></p>
 <button type="button" class="copy-inline-btn" data-copy="<%= settings.tr_iban || 'TR00 0000 0000 0000 0000 0000 00' %>" onclick="copyTextFromAttr(this)">
 IBAN Kopyala
 </button>
 </div>

 <div class="form-group" style="margin-top: 15px;">
 <label>Balans Artırma Məbləği (AZN)</label>
 <input type="number" id="topupAmount" min="0.5" step="0.01" placeholder="10.00"
 style="width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 4px;">
 </div>
 <div class="form-group" style="margin-top: 15px;">
 <label>Ödəniş edən şəxs (Ad Soyad)</label>
 <input type="text" id="topupSenderName" maxlength="80" autocomplete="name" placeholder="Hesap sahibi adı..."
 style="width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 4px;">
 </div>
 <div class="form-group" style="margin-top: 15px;">
 <label>Dekont (Şəkil)</label>
 <input type="file" id="topupReceipt" accept="image/*"
 style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 4px;">
 </div>

 <button id="topupRequestBtn" class="btn btn-primary" onclick="confirmTopupRequest()"
 style="width: 100%; padding: 15px; margin-top: 20px;">
 Balans Artırma Sorğusu Göndər
 </button>
 </div>
 </div>

 <div class="checkout-right">
 <div class="p-price-card">
 <h3>Xülasə</h3>
 <div class="total-row" style="margin-top: 20px;">
 <span>Cəmi:</span>
 <span id="finalTotal">0.00 AZN</span>
 </div>
 </div>
 <div class="p-price-card checkout-trust-card">
 <h4>Alıcı Güvən Paketi</h4>
 <ul>
 <li>AZN ilə lokal ödəniş axını</li>
 <li>Manual ödənişlərdə dekont təsdiqi</li>
 <li>Sifariş statusu profilinizdə canlı izləmə</li>
 <li>Problem olduqda operativ dəstək</li>
 </ul>
 <a href="/azerbaycanda-alisveris" class="btn btn-outline btn-sm" style="width:100%;">
 Azərbaycanda alış-veriş planını aç
 </a>
 </div>
 </div>
 </div>
 </div>

 <script>
 let currentTotal = 0;
 let userBalance = parseFloat("<%= user ? user.balance : 0 %>");
 let paymentCountry = 'AZ';
 let isOrderSubmitting = false;
 let isTopupSubmitting = false;

 function getTransferMethodLabel() {
 return paymentCountry === 'TR' ? 'IBAN Transfer' : 'C2C Card Transfer';
 }

 function setButtonLoading(buttonEl, isLoading, loadingText) {
 if (!buttonEl) return;
 if (!buttonEl.dataset.defaultLabel) {
 buttonEl.dataset.defaultLabel = buttonEl.textContent.trim();
 }
 buttonEl.disabled = Boolean(isLoading);
 buttonEl.style.opacity = isLoading ? '0.75' : '1';
 buttonEl.textContent = isLoading
 ? String(loadingText || 'Göndərilir...')
 : String(buttonEl.dataset.defaultLabel || '');
 }

 function validateReceiptFile(file) {
 if (!file) return { ok: false, error: 'Dekont faylı tələb olunur.' };
 const mime = String(file.type || '').toLowerCase();
 if (mime && !mime.startsWith('image/')) {
 return { ok: false, error: 'Dekont yalnız şəkil formatında olmalıdır.' };
 }
 const maxSize = 8 * 1024 * 1024;
 if (Number(file.size || 0) > maxSize) {
 return { ok: false, error: 'Dekont faylı maksimum 8MB ola bilər.' };
 }
 return { ok: true };
 }

 function updatePaymentCountryUI() {
 const isTR = paymentCountry === 'TR';
 document.querySelectorAll('.account-az').forEach((el) => { el.style.display = isTR ? 'none' : 'block'; });
 document.querySelectorAll('.account-tr').forEach((el) => { el.style.display = isTR ? 'block' : 'none'; });
 document.getElementById('tab-c2c-label').textContent = isTR ? 'IBAN Transfer' : 'Kart Köçürməsi';
 document.getElementById('tab-topup-label').textContent = isTR ? 'Balans Artır (IBAN)' : 'Balans Artır (C2C)';
 document.getElementById('transferTitle').textContent = isTR ? 'IBAN Köçürməsi (Manual)' : 'C2C Kart Köçürməsi (Manual)';
 document.getElementById('transferInfo').textContent = isTR
 ? 'Ödənişi aşağıdakı IBAN hesabına etdikdən sonra "Ödəniş etdim" düyməsinə basın.'
 : 'Ödənişi aşağıdakı karta etdikdən sonra "Ödəniş etdim" düyməsinə basın.';
 document.getElementById('topupTitle').textContent = isTR ? 'Balans Artırma (IBAN)' : 'Balans Artırma (C2C)';
 document.getElementById('topupInfo').textContent = isTR
 ? 'IBAN köçürməsini etdikdən sonra məbləği daxil edin, ad-soyad və dekont yükləyin. Sorğu admin təsdiqinə düşəcək.'
 : 'Kart köçürməsini etdikdən sonra məbləği daxil edin, ad-soyad və dekont yükləyin. Sorğu admin təsdiqinə düşəcək.';
 document.getElementById('senderName').placeholder = isTR ? 'Hesap sahibi adı...' : 'Karta yazılan ad...';
 document.getElementById('topupSenderName').placeholder = isTR ? 'Hesap sahibi adı...' : 'Karta yazılan ad...';
 }

 async function copyTextFromAttr(buttonEl) {
 const text = String(buttonEl?.dataset?.copy || '').trim();
 if (!text) return;
 try {
 await navigator.clipboard.writeText(text);
 Toastify({ text:"Kopyalandı: " + text, backgroundColor:"#10b981" }).showToast();
 } catch (e) {
 const temp = document.createElement('textarea');
 temp.value = text;
 document.body.appendChild(temp);
 temp.select();
 document.execCommand('copy');
 document.body.removeChild(temp);
 Toastify({ text:"Kopyalandı: " + text, backgroundColor:"#10b981" }).showToast();
 }
 }

 document.addEventListener('DOMContentLoaded', () => {
 const countrySelect = document.getElementById('paymentCountrySelect');
 const locale = String(navigator.language || '').toLowerCase();
 if (locale.startsWith('tr')) {
 paymentCountry = 'TR';
 countrySelect.value = 'TR';
 }
 updatePaymentCountryUI();
 countrySelect.addEventListener('change', function () {
 paymentCountry = this.value === 'TR' ? 'TR' : 'AZ';
 updatePaymentCountryUI();
 });

 const list = document.getElementById('checkoutItems');
 const totalEl = document.getElementById('finalTotal');
 const orderTotalDisplay = document.getElementById('orderTotalDisplay');
 const cart = JSON.parse(localStorage.getItem('azpin_cart')) || [];

 if (cart.length > 0) {
 cart.forEach(item => {
 currentTotal += item.price;
 const div = document.createElement('div');
 div.className = 'checkout-item-row';
 let extraInfo = '';
 if (item.player_id) {
 extraInfo = `<br><small class="text-muted">ID: ${item.player_id} - Nick: ${item.player_nickname}</small>`;
 }
 div.innerHTML = `<div><span>${item.name}</span>${extraInfo}</div> <b>${item.price.toFixed(2)} AZN</b>`;
 list.appendChild(div);
 });
 } else {
 list.innerHTML = '<p class="text-muted mb-0">Səbət boşdur. Balans artırma bölməsindən istifadə edə bilərsiniz.</p>';
 }

 totalEl.textContent = currentTotal.toFixed(2) + ' AZN';
 orderTotalDisplay.textContent = currentTotal.toFixed(2) + ' AZN';

 if (cart.length === 0 || userBalance < currentTotal) {
 if (currentTotal > 0 && userBalance < currentTotal) {
 document.getElementById('balanceError').style.display = 'block';
 }
 document.getElementById('balancePayBtn').disabled = currentTotal <= 0 || userBalance < currentTotal;
 document.getElementById('balancePayBtn').style.opacity = (currentTotal <= 0 || userBalance < currentTotal) ? '0.5' : '1';
 }

 ['c2cPayBtn', 'balancePayBtn', 'topupRequestBtn'].forEach((id) => {
 const button = document.getElementById(id);
 if (!button) return;
 button.dataset.defaultLabel = button.textContent.trim();
 });
 });

 function switchPayment(method) {
 document.querySelectorAll('.pay-tab').forEach(t => t.classList.remove('active'));
 document.querySelectorAll('.payment-section').forEach(s => s.style.display = 'none');

 document.getElementById('tab-' + method).classList.add('active');
 document.getElementById('section-' + method).style.display = 'block';
 }

async function confirmPayment(method) {
 if (isOrderSubmitting) return;
 const cart = JSON.parse(localStorage.getItem('azpin_cart')) || [];
 if (cart.length === 0) {
 Toastify({ text:"Səbət boşdur.", backgroundColor:"#ef4444" }).showToast();
 return;
 }
 const c2cPayBtn = document.getElementById('c2cPayBtn');
 const balancePayBtn = document.getElementById('balancePayBtn');
 const activePayBtn = method === 'c2c' ? c2cPayBtn : balancePayBtn;
 const formData = new FormData();
 formData.append('cart', JSON.stringify(cart));
 formData.append('payment_method', method === 'c2c' ? getTransferMethodLabel() : 'Balance');

 if (method === 'c2c') {
 const sender = (document.getElementById('senderName').value || '').trim();
 const receiptFile = document.getElementById('receipt').files[0];

 if (!sender || !receiptFile) {
 Toastify({ text:"Zəhmət olmasa bütün sahələri doldurun.", backgroundColor:"#ef4444" }).showToast();
 return;
 }
 if (sender.length < 3) {
 Toastify({ text:"Ad Soyad ən azı 3 simvol olmalıdır.", backgroundColor:"#ef4444" }).showToast();
 return;
 }
 const fileValidation = validateReceiptFile(receiptFile);
 if (!fileValidation.ok) {
 Toastify({ text:fileValidation.error, backgroundColor:"#ef4444" }).showToast();
 return;
 }
 formData.append('sender_name', sender);
 formData.append('receipt', receiptFile);
 } else {
 if (userBalance < currentTotal) {
 Toastify({ text:"Kifayət qədər balansınız yoxdur.", backgroundColor:"#ef4444" }).showToast();
 return;
 }
 }

 isOrderSubmitting = true;
 setButtonLoading(activePayBtn, true, 'Göndərilir...');
 try {
 const res = await fetch('/process-order', {
 method: 'POST',
 body: formData
 });

 const result = await res.json().catch(() => ({ success: false, error: 'Serverdən düzgün cavab gəlmədi.' }));

 if (result.success) {
 localStorage.removeItem('azpin_cart');
 Toastify({ text:"Sifarişiniz qəbul edildi! Yönləndirilirsiniz...", backgroundColor:"#10b981" }).showToast();
 setTimeout(() => window.location.href = '/profile', 2000);
 } else {
 Toastify({ text:"Xəta:" + (result.error ||"Bilinməyən xəta baş verdi."), backgroundColor:"#ef4444" }).showToast();
 }
 } catch (e) {
 Toastify({ text:"Şəbəkə xətası. Zəhmət olmasa yenidən cəhd edin.", backgroundColor:"#ef4444" }).showToast();
 } finally {
 setButtonLoading(activePayBtn, false);
 isOrderSubmitting = false;
 }
}

 async function confirmTopupRequest() {
 if (isTopupSubmitting) return;
 const amount = parseFloat(document.getElementById('topupAmount').value || '0');
 const sender = (document.getElementById('topupSenderName').value || '').trim();
 const receiptFile = document.getElementById('topupReceipt').files[0];
 const topupRequestBtn = document.getElementById('topupRequestBtn');

 if (!amount || amount <= 0 || !sender || !receiptFile) {
 Toastify({ text:"Məbləğ, Ad Soyad və Dekont mütləqdir.", backgroundColor:"#ef4444" }).showToast();
 return;
 }
 if (amount < 1) {
 Toastify({ text:"Minimum balans artırma məbləği 1 AZN olmalıdır.", backgroundColor:"#ef4444" }).showToast();
 return;
 }
 if (sender.length < 3) {
 Toastify({ text:"Ad Soyad ən azı 3 simvol olmalıdır.", backgroundColor:"#ef4444" }).showToast();
 return;
 }
 const fileValidation = validateReceiptFile(receiptFile);
 if (!fileValidation.ok) {
 Toastify({ text:fileValidation.error, backgroundColor:"#ef4444" }).showToast();
 return;
 }

 const formData = new FormData();
 formData.append('amount', amount.toFixed(2));
 formData.append('sender_name', sender);
 formData.append('receipt', receiptFile);
 formData.append('payment_method', getTransferMethodLabel());

 isTopupSubmitting = true;
 setButtonLoading(topupRequestBtn, true, 'Göndərilir...');
 try {
 const res = await fetch('/balance/topups/request', {
 method: 'POST',
 body: formData
 });

 const result = await res.json().catch(() => ({ success: false, error: 'Server xətası' }));
 if (result.success) {
 document.getElementById('topupAmount').value = '';
 document.getElementById('topupSenderName').value = '';
 document.getElementById('topupReceipt').value = '';
 Toastify({ text: result.message || "Balans artırma sorğusu göndərildi.", backgroundColor:"#10b981" }).showToast();
 } else {
 Toastify({ text:"Xəta: " + (result.error || "Bilinməyən xəta"), backgroundColor:"#ef4444" }).showToast();
 }
 } catch (e) {
 Toastify({ text:"Şəbəkə xətası. Zəhmət olmasa yenidən cəhd edin.", backgroundColor:"#ef4444" }).showToast();
 } finally {
 setButtonLoading(topupRequestBtn, false);
 isTopupSubmitting = false;
 }
}
 </script>

 <style>
 .checkout-grid {
 display: grid;
 grid-template-columns: 1.5fr 1fr;
 gap: 40px;
 }

 .az-convert-strip {
 display: grid;
 gap: 8px;
 margin: 12px 0 12px;
 }

 .az-convert-item {
 display: flex;
 align-items: center;
 gap: 8px;
 padding: 10px 12px;
 border-radius: 10px;
 border: 1px solid rgba(148, 163, 184, 0.24);
 background: rgba(15, 23, 42, 0.7);
 color: #e2e8f0;
 font-size: 13px;
 }

 .az-convert-item i {
 color: #7dd3fc;
 font-size: 16px;
 }

 .az-convert-actions {
 display: flex;
 flex-wrap: wrap;
 gap: 8px;
 margin-bottom: 16px;
 }

 .pay-tab {
 flex: 1;
 padding: 15px;
 text-align: center;
 background: #f8fafc;
 border: 2px solid #e2e8f0;
 border-radius: 12px;
 cursor: pointer;
 transition: all 0.3s;
 display: flex;
 flex-direction: column;
 gap: 8px;
 color: #64748b;
 }

 .pay-tab i {
 font-size: 20px;
 }

 .pay-tab.active {
 border-color: #38bdf8;
 background: rgba(56, 189, 248, 0.05);
 color: #38bdf8;
 }

 .bank-card-preview {
 background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
 color: white;
 padding: 25px;
 border-radius: 16px;
 margin: 20px 0;
 box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
 }

 .card-label {
 font-size: 11px;
 opacity: 0.6;
 letter-spacing: 1px;
 margin-bottom: 5px;
 }

 .card-num {
 font-size: 22px;
 letter-spacing: 3px;
 font-weight: 700;
 font-family: monospace;
 }

 .copy-inline-btn {
 margin-top: 8px;
 border: 1px solid rgba(255, 255, 255, 0.25);
 background: rgba(255, 255, 255, 0.12);
 color: #fff;
 border-radius: 8px;
 padding: 6px 10px;
 font-size: 12px;
 font-weight: 700;
 cursor: pointer;
 }

 .copy-inline-btn:hover {
 background: rgba(255, 255, 255, 0.2);
 }

.iban-info-box {
 background: #f8fafc;
 border: 1px solid #e2e8f0;
 border-radius: 12px;
 padding: 16px;
 margin: 16px 0;
 color: #0f172a;
}

.iban-title {
 margin: 0 0 10px;
 font-size: 16px;
 font-weight: 700;
}

.iban-line {
 margin: 6px 0;
 font-size: 14px;
 color: #334155;
}

.iban-value {
 font-family: monospace;
 font-weight: 700;
 letter-spacing: 0.4px;
}

 .card-footer-info {
 display: flex;
 justify-content: space-between;
 margin-top: 20px;
 font-size: 14px;
 font-weight: 500;
 }

 .balance-status-card {
 display: grid;
 grid-template-columns: 1fr 1fr;
 gap: 15px;
 margin: 20px 0;
 }

 .balance-item {
 background: #f1f5f9;
 padding: 15px;
 border-radius: 12px;
 text-align: center;
 }

 .balance-item small {
 display: block;
 color: #64748b;
 font-size: 11px;
 text-transform: uppercase;
 margin-bottom: 5px;
 }

 .balance-item span {
 font-weight: 700;
 font-size: 18px;
 }

 .checkout-item-row {
 display: flex;
 justify-content: space-between;
 padding: 12px 0;
 border-bottom: 1px solid #f1f5f9;
 }

 .checkout-trust-card {
 margin-top: 16px;
 }

 .checkout-trust-card h4 {
 margin-bottom: 10px;
 font-size: 17px;
 }

 .checkout-trust-card ul {
 margin: 0 0 12px;
 padding-left: 18px;
 color: #475569;
 font-size: 13px;
 }

 .checkout-trust-card li {
 margin-bottom: 6px;
 }

 @media (max-width: 768px) {
 .checkout-grid {
 grid-template-columns: 1fr;
 }

 .az-convert-actions .btn {
 width: 100%;
 }
 }
 </style>
 <%- include('partials/footer') %>
